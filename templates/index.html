<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3ãƒ¶å›½èª æŠ•ç¨¿æ”¯æ´ãƒ„ãƒ¼ãƒ«</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: #f4f7f9; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        .container { max-width: 650px; width: 100%; background: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        h1 { color: #333; text-align: center; margin-bottom: 20px; font-size: 1.8em; }
        p.info { text-align: center; color: #555; margin-bottom: 20px; }

        /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒªã‚¢ */
        textarea#input_text { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; resize: vertical; min-height: 100px; font-size: 1em; }
        .button-group { display: flex; gap: 10px; margin-bottom: 30px; }
        .button-group button { flex-grow: 1; background-color: #33a8ff; color: white; padding: 12px 15px; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: bold; transition: background-color 0.3s; }
        .button-group button:hover { background-color: #007bff; }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .result-box { border-top: 2px solid #eee; padding-top: 20px; }
        h2 { font-size: 1.3em; color: #007bff; margin-bottom: 15px; }
        textarea#output_text { width: 100%; padding: 15px; border: 2px dashed #007bff; border-radius: 8px; box-sizing: border-box; resize: none; min-height: 150px; background-color: #e6f7ff; font-size: 1.05em; line-height: 1.5; color: #333; cursor: pointer; }
        #copy-button { background-color: #28a745; margin-top: 10px; padding: 10px; }
        #copy-button:hover { background-color: #1e7e34; }
        .error { color: #d32f2f; background-color: #ffcdd2; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“² 3ãƒ¶å›½èª æŠ•ç¨¿æ”¯æ´ãƒ„ãƒ¼ãƒ«</h1>
        <p class="info">æ—¥æœ¬èªã€ä¸­å›½èªã€ãƒ™ãƒˆãƒŠãƒ èªã®ã„ãšã‚Œã‹ã§å…¥åŠ›ã™ã‚‹ã¨ã€æ®‹ã‚Šã®2è¨€èªã«è‡ªå‹•ã§ç¿»è¨³ã—ã€ã‚³ãƒ”ãƒ¼ã—ã‚„ã™ã„å½¢ã§ä½µè¨˜ã—ã¾ã™ã€‚</p>

        {% if error %}
            <div class="error">{{ error }}</div>
        {% endif %}

        <form method="POST">
            <label for="input_text" style="font-weight: bold; display: block; margin-bottom: 5px;">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›:</label>
            <textarea name="input_text" id="input_text" placeholder="ä¾‹: æ˜æ—¥ã®æœ10æ™‚ã«ä¼šè­°å®¤ã§ãŠä¼šã„ã—ã¾ã—ã‚‡ã†ã€‚" required>{{ original_text or '' }}</textarea>
            <div class="button-group">
                <button type="submit">ç¿»è¨³ãƒ»ã‚³ãƒ”ãƒ¼ç”¨ãƒ†ã‚­ã‚¹ãƒˆä½œæˆ</button>
            </div>
        </form>

        {% if full_output %}
        <div class="result-box">
            <h2>âœ¨ ç¿»è¨³çµæœ (ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚³ãƒ”ãƒ¼)</h2>
            <p style="font-size: 0.9em; color: #777;">å…¥åŠ›è¨€èª: {{ all_langs[detected_lang_code] }}</p>

            <textarea id="output_text" readonly onclick="copyText()">{{ full_output }}</textarea>
            <div style="margin-top: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
        <label>ç¿»è¨³ã™ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¨€èªã‚’é¸æŠã—ã¦ãã ã•ã„ (è¤‡æ•°é¸æŠå¯):</label>
        <div style="margin-top: 5px;">
        {% for code, label in all_langs.items() %}
            {% if code != 'ja' %} <input type="checkbox" id="lang_{{ code }}" name="target_langs" value="{{ code }}" checked>
            <label for="lang_{{ code }}">{{ label }}</label>
            {% endif %}
        {% endfor %}
        </div>
    </div>

    <button type="submit" style="margin-top: 15px;">ç¿»è¨³ãƒ»ã‚³ãƒ”ãƒ¼ç”¨ãƒ†ã‚­ã‚¹ãƒˆä½œæˆ</button>
</form>

            <button type="button" id="copy-button" onclick="copyText()">ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>

            <script>
                function copyText() {
                    const outputArea = document.getElementById('output_text');
                    outputArea.select(); // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠ
                    outputArea.setSelectionRange(0, 99999); // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
                    navigator.clipboard.writeText(outputArea.value)
                        .then(() => {
                            // ã‚³ãƒ”ãƒ¼æˆåŠŸæ™‚ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
                            const originalText = document.getElementById('copy-button').textContent;
                            document.getElementById('copy-button').textContent = 'âœ… ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
                            setTimeout(() => {
                                document.getElementById('copy-button').textContent = originalText;
                            }, 1500);
                        })
                        .catch(err => {
                            alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
                            console.error('ã‚³ãƒ”ãƒ¼ã‚¨ãƒ©ãƒ¼:', err);
                        });
                }
            </script>
        </div>
        {% endif %}
    </div>
</body>
</html>